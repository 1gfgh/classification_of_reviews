# EDA

## Описание EDA

Расскажем что мы делали и зачем. \
Первым делом мы посмотрели на то, какое распеределение у нас по оценке, числу слов и числу символов в отзывах. Посмотрели на карту корреляций между рейтингом, длиной отзыва и числом смайликов в них. Хотели определить то, к чему бы прицепиться. Затем сделали массив стоп-слов, это помолго повысить корректность анализа, помогло изучать более интересные кейсы, нежели предлоги и частицы. Составили облака слов, чтобы посмотреть на то, что чаще встречается. Нам не хватило, посчитали топ самых частых слов, биграмм и триграмм. Причем как и в целом, так и для каждой оценки. Разумеется, дальше пошли считать корреляцию всех этих выражений. Вывели все в виде графиков для удобства. Проанализировали распределение отзывов по длине. Также обратили внимание на смайлики, какие чаще всего встречатся, и какой рейтинг в среднем с каждым их них/без них. Все упомянутые операции мы повторили на датасете с урезанным количеством максимальныз оценок, чтоб сгладить распределение оценок. Такой алгоритм применили ко всем трем датасетам, к их совместному, а также к паре Lamoda+WB. Сделали 5 разных анализов, про каждый написали вывод.\
Весь анализ вы можете посмотреть и изучить [здесь.](EDA.ipynb)

## Вывод для `WB` dataset

Начнем с того, что слова в отдельности, даже самые популярные, мало дают понимания об оценке. Однако, если мы говорим о триграммах, а нередко и о биграммах - уже можно наблюдать о явной корреляции с рейтингом отзыва. Также стоит заметить, что самые популярные слова в отдельности зачастую являются вспомогательными частями речи(а-ля предлог, союз или частица). Идем дальше. Видно, что нет как таковой корреляции между количеством символов/смайлов в тексте отзыва и оценкой отзыва. А вот отдельные(на примере самых популярных) смайлы вносят сильное влияние на итоговую оценку, что особенно хорошо видно в "урезанном" датасете. При наличии определенного emoji разброс оценки очень сильно уменьшается. Это основные вывода из всего выше, подробности можно посмотреть на диаграммах непосредственно.

## Вывод для `Lamoda` dataset

В целом -- вообще ничего удивительного, кроме того что слово тушь имеет наибольшую корреляцию с рейтингом. Никогда бы не подумал что на моих данных это так. Длина отзыва также не особо влияет, но некоторые слова, биграммы и триграммы имеют корреляцию выше 0.05, что довольно ощутимо в контексте нашеих данных. Оказалось также, что фактор наличия смайликв тоже имеет некую корреляцию. Самый коррелируемый смайлик -- смайлик пальца вверх, имеет корреляцию 0.06. Биграмма "не очень" имеет корреляцию -0.2, в то время как триграмма  "размер в размер" имеет корреляцию в 0.18. Более подробные выводы представлены в различных диаграммах и графиках, которые можно посмотреть в ноутбуке.

## Вывод для `MustApp` dataset

Общая ситуация довольна предсказуема в силу человеческого фактора (например, положительных отзывов явно больше)
Конкретно в датасете must отрицательные отзывы хорошо характеризуются нецензурными выражениями/словами, а положительные в свою очередь внесли новые характерные для контекста видеоконтента прилагательные.
Что приятно, датасет довольно равномерно распределён по длине отзыва.
Важно заметить, что существующие модели сентиментального анализа показали на этих данных точность 0.85, но precision и f1-score указывают на то, что модель ошибается из-за частых положительных предсказаний.

## Вывод для `WB`&`Lamoda` dataset

Посмотрим на наш датасет преимущественно с одеждой и бытовыми товарами. Сразу бросается в глаза - смайлики повышают среднюю оценку, например смайлик сердечка поднимает средний балл примерно на 0.5. Довольно много триграмм которые попали в топ с разными оценками, например "брала на подарок" встречается и в топе для оценик 6, и для оценки 10. Можно предположить, что многие популярные не только слова, но и биграммы/триграммы не всегда склоняют оценку в конкретную сторону. Из слов же можно заметить, что "качество" - одно из самых популярных как для положительных отзывов, так и для отрицательных, что явно говорит нам о необходимости изучения биграмм и триграмм. Из всех биграммм выделяется "и не", имеет корреляцию -0.08. Видимо, ее используют, когда перечисляют недостатки какого-либо товара. С триграммами все слабее, выделим разве что "размер в размер" как самую сильнокоррелируемую. Видимо, покупатели любят соответствие с размерной сеткой (ну а кто нет?). Также стоит заметить, что длинные отзывы имеют оценку в среднем ниже, чем короткие. Явно стоит обратить внимание, что слова "хороший", "отлично" и производные от них имеют в частности отрицательную корреляцию, что не может не удивлять. Отдельно исследование датасета помогло найти следующие примеры данным явлениям(рейтинг по 10-бальной шкале):

* Rating: 4; Review: Материал не хороший
* Rating: 4; Review: Прикольный принт. Цвет сошел после первой стирки, футболка сильно электризуется, крой хороший. Но носить ее после первой стирки и когда тебя постоянно бьет током невозможно. Два балла только за принт, надеюсь другие вещи продавца лучше качеством!) потому что хотелось бы еще, что-то приобрести, принты прикольные, повторюсь.
* Rating: 4; Review: Это хороший товар! Качественный! Учитывая цену это самый разумный выбор я считаю! Ничем не уступают конкурентам из более дорогих брендов
* Rating: 6; Review: Незнаю почему пишут ,что футболка отличного качества, на мой взгляд это не так ,отказ
* Rating: 6; Review: Носится, отлично! Приятна к телу.
* Rating: 6; Review: Материал и внешний вид на отлично. Но качество... швы на плечах кривые и топорщатся. Не ожидал от этого производителя.

Как видим, данное явление отображает, как выборсы из данных, так и просто показатель, что в отрицательных отзывах могут встречаться маркеры положительных отзывов.\
Также стоит заметитьь, что `Lamoda` сильно перетягивает внимание на себя во многих пунктах анализа, возможно будет иметь смысл попробовать обучать модели в том числе и отдельно на этих датасетах тоже.\
Урезанный датасет, в общем плане, имеет ожидаемое поведение, аномалии в анализе встречаются, но не очень часто и связаны напрямую с тем, что мы вручную удаляем немалую часть отзывов с максимальной оценкой.\
Также стоит упомянуть ситуацию с существующими моделями: они справляются довольно неплохо, особенно в метриках точности, однако ощутимо проседают в качестве precision, что может быть связано с большим количеством положительных отзывов, что повышает точность ответов модели. Это также подтверждается тем, что точность падает на урезанном датасете.

## Вывод для `All` dataset

Картина почти полностью, в общем плане, совпадает с предыдущим выводом, однако данные из `MustApp` ощущаются инородно среди двух датасетов и некоторые пункты анализа выглядят немного странно. По аналогичной причине появились иностранные слова, тк они присутствуют только в джанном датасете. В остальном, можно полагаться на предыдущий анализ.

## Общие слова

Хотелось бы обратиться к данным и сделать несколько заметок по ним. Наши датасеты крайне неравномерны, положительных отзывов сильно больше, чем отрицательных.  Поэтому нам и потребовалось более полумиллиона разных отзывов, ведь найти негативные оказалось не так просто. Пропусков крайне немного, разве что в датасете Lamoda зачастую не было описания товара. Но это не ошибка парсера, а суровая реальность. Также наши датаеты крайне отличаются друг от друга. Они и привязаны к разным товарам, и имеют совершенно разные показатели. Например, топ слова почти полностью не пересекаются (за исключением предлогов), лидерборд сильнокоррелирующих слов также почти полностью различатеся. В мире уже есть аналоги нашей модели -- SOTA, причем она неплохо справляется, за исключением упомянутых проблем. Возможно, в итоговом продукте будет иметь смысл использовать как наши показания, так и показания готовой SOTA, чтобы добиться максимального качества по всем метрикам, а не только точности.
